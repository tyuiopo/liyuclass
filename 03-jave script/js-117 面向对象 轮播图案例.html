<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>js-117 面向对象 轮播图案例</title>
	<style>
		*{
			margin: 0;
			padding: 0;
			list-style: none;
		}
		.rightBox,.leftBox{
			position: absolute;
			top:50%;
			width: 40px;
			height: 80px;
			line-height: 80px;
			background:rgba(8,8,8,0.6);
			text-align: center;
			color: #fff;
			cursor: pointer;
			font-size: 30px;
			margin-top: -40px;
		}
		.rightBox{
			right: 0;
		}
		.leftBox{
			left: 0;
		}
		.bottonBtn{
			position: absolute;
			bottom: 10px;
			right:20px;
			cursor: pointer;
		}
		.bottonBtn li{
			float: left;
			width: 20px;
			height: 20px;
			border-radius: 50%;
			background:rgba(9,9,9,0.5);
			margin-right: 5px;
		}
		.bottonBtn li.active{
			background:rgba(255,255,255,1);
		}
	</style>
</head>
<body>
	<div id="box"></div>
</body>
<script>
	function Carousel(options){
		this.oBox=document.getElementById(options.id);
		this.aImg=options.aImg;
		this.width=options.width;
		this.height=options.height;
		this.rightBox=null;
		this.leftBox=null;
		this.oImg=null;
		this.OulImg=null;
		this.now=0;
		this.OulBtn=null;
		this.time=options.time;


		this.init();
		this.bindEvent();
		this.tab();
		this.play();
	}

	Carousel.prototype.init=function(){
		this.oBox.style.position='relative';
		this.oBox.style.width=this.width+'px';
		this.oBox.style.height=this.height+'px';

		this.OulImg=document.createElement('ul');

		this.OulBtn=document.createElement('ul');
		this.OulBtn.className='bottonBtn';
		this.OulBtn.style.zIndex=99;

		for(var i=0;i<this.aImg.length;i++){

			var oBtn=document.createElement('li');

			var oLi=document.createElement('li');
			oLi.style.width='700px';
			oLi.style.height='400px';
			oLi.style.position='absolute';
			oLi.style.left='0';
			oLi.style.top='0';
			if(i==0){
				oLi.style.zIndex=50;
				oLi.style.opacity=1;
				oBtn.className='active';
			}else{
				oLi.style.zIndex=0;
				oLi.style.opacity=0.5;
			}

			this.oImg=document.createElement('img');
			this.oImg.src=this.aImg[i];
			this.oImg.style.width='100%';
			this.oImg.style.height='100%';

			oLi.appendChild(this.oImg);
			this.OulBtn.appendChild(oBtn);
			this.OulImg.appendChild(oLi);	
		}

		this.leftBox=document.createElement('span');
		this.rightBox=document.createElement('span');
		// console.log(this.rightBox);
		this.leftBox.className='leftBox';
		this.rightBox.className='rightBox';

		this.leftBox.style.zIndex='99';
		this.rightBox.style.zIndex='99';

		this.leftBox.innerHTML='&lt;';
		this.rightBox.innerHTML='&gt;';

		this.oBox.appendChild(this.leftBox);
		this.oBox.appendChild(this.rightBox);

		this.oBox.appendChild(this.OulImg);
		this.oBox.appendChild(this.OulBtn);
	}

	Carousel.prototype.bindEvent=function(){
		// console.log(this.rightBox)
		var _this=this;
		this.rightBox.onclick=function(){
			_this.now++;
			if(_this.now>=_this.OulImg.children.length){
				_this.now = 0;
			}
			_this.tab();	
		}
		this.leftBox.onclick=function(){
			_this.now--;
			if(_this.now<0){
				_this.now = _this.OulImg.children.length-1;
			}
			_this.tab();	
		}
		for(var i=0;i<this.OulBtn.children.length;i++){
			this.OulBtn.children[i].index=i;
			this.OulBtn.children[i].onclick=function(){
				// console.log(_this.OulBtn.children.length);
				// console.log(_this.tab());
				// console.log(i);
				_this.now=this.index;
				_this.tab();
			}
		}
	}


	Carousel.prototype.play=function(){
		var _this=this;
		var tmer=0;
		clearInterval(tmer);
		tmer=setInterval(this.rightBox.onclick,this.time);
		this.oBox.onmouseover=function(){
			// console.log(tmer)
			clearInterval(tmer);
		}
		this.oBox.onmouseout=function(){
			console.log('bb')
			tmer=setInterval(_this.rightBox.onclick,_this.time);
		}
	}



	Carousel.prototype.tab=function(){
			for(var i=0;i<this.OulImg.children.length;i++){
				this.OulImg.children[i].style.zIndex=0;
				this.OulImg.children[i].style.opacity=0;
				this.OulBtn.children[i].className='';
			}
			this.OulImg.children[this.now].style.zIndex=50;
			this.OulImg.children[this.now].style.opacity=1;
			this.OulBtn.children[this.now].className='active';
	}
	

	new Carousel({
		id:'box',
		aImg:['Numimg/11.png','Numimg/33.jpg','Numimg/44.jpg'],
		width:700,
		height:400,
		time:2000,
	});
</script>
</html>